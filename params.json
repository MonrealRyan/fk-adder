{
  "name": "FkAdder",
  "tagline": "Lets you add foreign keys in a swift! Foreign key adder in laravel migration.",
  "body": "### FkAdder for Laravel Migration\r\n\r\nLets you add foreign keys in a swift! Foreign key adder for laravel migration. Tested only in laravel version `4.2.11`.\r\n\r\nThe purpose of `FkAdder` is to simplify declaration of foreign key columns in migration.\r\n\r\n__Things that `FkAdder` do for you:__\r\n  *   __Remembers the data type of a foreign key__, and it will provide the correct data type for you, so that you don't have to recall the data type of foreign key column\r\n      whenever you need that certain foreign key.\r\n  *   __Lets you create migration tables in any order__. This solves the problem when your table is created prior than the reference table.\r\n\r\n\r\n#### Installation\r\n\r\n`composer require ajcastro/fk-adder`\r\n\r\n#### Configuration\r\n\r\nCreate a config file named `app/config/fk_adder.php`\r\n\r\n```\r\n<?php\r\n\r\nreturn [\r\n    'fk_namespace' => 'Your\\Fk\\Namespace',\r\n    'fk_datatypes_path' => app_path('database/foreign_keys/fk_datatypes.php')\r\n];\r\n```\r\n\r\n#### Setup\r\n\r\nSetup your foreign keys.\r\n\r\nCreate classes of foreign keys declaration inside your `fk_namespace`.\r\n\r\n__Naming Convention__\r\n\r\nIf the foreign key is e.g. `user_id`, then the class name should be `UserId`.\r\n\r\nExample:\r\n\r\n```\r\n<?php\r\n\r\nnamespace Your\\Fk\\Namespace;\r\n\r\nuse FkAdder\\BaseFk;\r\n\r\nclass UserId extends BaseFk\r\n{\r\n    protected $referenceTable = 'users';\r\n\r\n    public function createFkColumn($column)\r\n    {\r\n        return $this->table->unsignedInteger($column);\r\n    } \r\n}\r\n\r\n```\r\n\r\nIf your foreign key declaration is so simple as it just needs the datatype declaration you can use your `fk_datatypes_path`.\r\n\r\n```\r\n<?php\r\n\r\n/*\r\n * Fk datatypes. Registry of datatypes per fk, if ever createFkColumn is as simple as a datatype declaration.\r\n * For simple fk datatype column creation.\r\n */\r\nreturn [\r\n    'user_id' => 'unsignedInteger'\r\n];\r\n```\r\n\r\n#### Usage\r\n\r\n__Sample__:\r\n```\r\nSchema::create('users', function(Blueprint $table) {\r\n    $table->increments('id');\r\n    Fk::make($table)->add('user_group_id')->nullable()->comment('User group of the user');\r\n});\r\n```\r\n\r\nCreate your migration and  \r\nName your migration filename like `3000_03_01_094045_add_foreign_keys_to_all_table.php` \r\nto make sure it will be the last migration to be executed.\r\n\r\n__Migration Template__\r\n\r\n```\r\n<?php\r\n\r\nuse Illuminate\\Database\\Migrations\\Migration;\r\nuse Illuminate\\Database\\Schema\\Blueprint;\r\n\r\nclass AddForeignKeysToAllTable extends Migration\r\n{\r\n    /**\r\n     * Run the migrations.\r\n     *\r\n     * @return void\r\n     */\r\n    public function up()\r\n    {\r\n        // IMPORTANT NOTE: Make sure this is the last migration being called.\r\n        // Execute creation of foreign keys by all migrations which use Fk. \\m/ :).\r\n        foreach (Fk::$foreignKeys as $foreignKey) {\r\n            Schema::table($foreignKey['table'], function (Blueprint $table) use ($foreignKey) {\r\n                $table->foreign($foreignKey['column'], $foreignKey['key_name'])\r\n                ->references($foreignKey['primary_key'])\r\n                ->on($foreignKey['reference_table'])\r\n                ->onDelete($foreignKey['on_delete'])\r\n                ->onUpdate($foreignKey['on_update']);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reverse the migrations.\r\n     *\r\n     * @return void\r\n     */\r\n    public function down()\r\n    {\r\n    }\r\n}\r\n\r\n```\r\n\r\n#### License\r\n\r\nReleased under MIT License.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}